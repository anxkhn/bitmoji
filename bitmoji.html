<html>

<head>
    <title>Bitmoji Generator</title>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://unpkg.com/tooltip.js/dist/umd/tooltip.min.js"></script>
    <script src="https://unpkg.com/popper.js/dist/umd/popper.min.js"></script>
</head>

<body>
    <div id="search-bar" style="height: 40px; position: fixed; top: 10px;">
        <input type="text" id="tag-search" onkeyup="searchFilter()" placeholder="Search tags...">
    </div>
    <div id="container" style="margin-top: 40px;">

    </div>
    <script type="text/javascript">
function getUrlParams(prop) {
    var params = new URLSearchParams(decodeURIComponent(location.search.slice(1)));
    return prop ? params.get(prop) : "";
}

$(function() {
    var firstID = getUrlParams("firstid");
    if (!firstID) {
        alert("You must assign both a url param for \"firstid\"");
        return false;
    }

    var lastImageIndex = 0;
    var displayImages = function(data, endIndex) {
        if (endIndex < data["imoji"].length) {
            data["imoji"].slice(lastImageIndex, endIndex).forEach(function(comicInfo) {
                var imgURL = comicInfo.src.replace("%s", firstID);
                $("#container").append(`<img class='comic-img' src='${imgURL}' width='100' data-tags='${comicInfo.tags}'/>`);
            });
        } else {
            console.log("All images loaded");
        }
        lastImageIndex = endIndex;
    };

    var waitToLoad = false;
    $.getJSON("api.json", function(data) {
        displayImages(data, 80);
        var

    </script>
</bodY>

</html>
